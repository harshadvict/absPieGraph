<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.7.0"></script>
     <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
</head>

<body style="margin-right: 0; margin-left: 0;">
    <div class="chart-container" style="position: relative; height:91vh; width:96vw">
        <canvas id="myChart"></canvas>
    </div>
    <script>
        var config = JSON.parse(decodeURI(window.location.href.split('?')[1].split('&')[0].split('=')[1]));
        console.log(config, 'config');
        var ctx = document.getElementById("myChart").getContext('2d');
        config.options['plugins']= {
            datalabels: {
                 color: '#fff',
                anchor:'end',
                align:'start',
                offset:-10,
                borderWidth:2,
                borderColor: '#fff',
                borderRadius:25,
                backgroundColor:[
				"#2484c1", "#65a620", "#7b6888", "#a05d56", "#961a1a",'#FFEBEE',
				"#d8d23a", "#e98125", "#d0743c", "#635222", "#6ada6a",'#E57373',
				"#0c6197", "#7d9058", "#207f33", "#44b9b0", "#bca44a",'#E53935',
				"#e4a14b", "#a3acb2", "#8cc3e9", "#69a6f9", "#5b388f",'#FF1744',
				"#546e91", "#8bde95", "#d2ab58", "#273c71", "#98bf6e", '#F06292',
				"#4daa4b", "#98abc5", "#cc1010", "#31383b", "#006391",'#EC407A',
				"#c2643f", "#b0a474", "#a5a39c", "#a9c2bc", "#22af8c", '#D81B60',
				"#7fcecf", "#987ac6", "#3d3b87", "#b77b1c", "#c9c2b6",'#880E4F',
				"#807ece", "#8db27c", "#be66a2", "#9ed3c6", "#00644b",'#FF80AB',
				"#005064", "#77979f", "#77e079", "#9c73ab", "#1f79a7",'#F50057',
			    ],         
                font:{
                    weight:'bold',
                    size:'10'
                },
                formatter: (value, ctx) => {
                    let sum = ctx.dataset._meta[0].total;
                    let percentage = (value * 100 / sum).toFixed(2) + " %";
                    //return value +"%";
                    console.log("percentage", percentage)
                    return percentage;
                }
                
            }
        }
        console.log(config);
        var myChart = new Chart(ctx,
            config
        );
    </script>
</body>

</html>
