<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.7.0"></script>
     <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
</head>

<body style="margin-right: 0; margin-left: 0;">
    <div class="chart-container" style="position: relative; height:91vh; width:96vw">
        <canvas id="myChart"></canvas>
    </div>
    <script>
        var config = JSON.parse(decodeURI(window.location.href.split('?')[1].split('&')[0].split('=')[1]));
        console.log(config, 'config');
        var ctx = document.getElementById("myChart").getContext('2d');
        config.options['plugins']= {
            datalabels: {
                 color: '#fff',
                anchor:'end',
                align:'start',
                offset:-10,
                borderWidth:2,
                borderColor: '#fff',
                borderRadius:25,
                backgroundColor: ['#F44336',
                    '#FFEBEE',
                    '#FFCDD2',
                    '#EF9A9A',
                    '#E57373',
                    '#EF5350',
                    '#E53935',
                    '#D32F2F',
                    '#C62828',
                    '#B71C1C',
                    '#FF8A80',
                    '#FF5252',
                    '#FF1744',
                    '#D50000',
                    '#FCE4EC',
                    '#F8BBD0',
                    '#F48FB1',
                    '#F06292',
                    '#EC407A',
                    '#E91E63',
                    '#D81B60',
                    '#C2185B',
                    '#AD1457',
                    '#880E4F',
                    '#FF80AB',
                    '#FF4081',
                    '#F50057',
                    '#C51162',
                    '#F3E5F5',
                    '#E1BEE7',
                    '#CE93D8',
                    '#BA68C8',
                    '#AB47BC',
                    '#9C27B0',
                    '#8E24AA',
                    '#7B1FA2',
                    '#6A1B9A',
                    '#4A148C'],
                font:{
                    weight:'bold',
                    size:'10'
                },
                formatter: (value, ctx) => {
                    let sum = ctx.dataset._meta[0].total;
                    let percentage = (value * 100 / sum).toFixed(2) + " %";
                    //return value +"%";
                    console.log("percentage", percentage)
                    return percentage;
                }
                
            }
        }
        console.log(config);
        var myChart = new Chart(ctx,
            config
        );
    </script>
</body>

</html>
